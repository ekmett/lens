<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Lens.Zipper</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Lens-Zipper.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Control-Lens-Zipper.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">lens-3.7: Lenses, Folds and Traversals</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Maintainer</th><td>Edward Kmett &lt;ekmett@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Control.Lens.Zipper</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Zippers
</a><ul><li><a href="#g:2">Focusing
</a></li><li><a href="#g:3">Vertical Movement
</a></li><li><a href="#g:4">Lateral Movement
</a></li><li><a href="#g:5">Movement Combinators
</a></li><li><a href="#g:6">Absolute Positioning
</a></li><li><a href="#g:7">Closing the zipper
</a></li><li><a href="#g:8">Recording
</a></li><li><a href="#g:9">Unsafe Movement
</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> with fairly strong type checking guarantees.
</p><p>The code here is inspired by Brandon Simmons' <code>zippo</code> package, but uses
 a slightly different approach to represent the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> that makes the whole thing
 look like his breadcrumb trail, and can move side-to-side through traversals.
</p><p>Some examples types:
</p><dl><dt><code><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> a</code></dt><dd> represents a trivial <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> with its focus at the root.
</dd><dt><code><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/containers-0.4.2.1/Data-Tree.html#t:Tree">Tree</a></code> a <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> a</code></dt><dd> represents a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> that starts with a
   <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/containers-0.4.2.1/Data-Tree.html#t:Tree">Tree</a></code> and descends in a single step to values of type <code>a</code>.
</dd><dt><code><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/containers-0.4.2.1/Data-Tree.html#t:Tree">Tree</a></code> a <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/containers-0.4.2.1/Data-Tree.html#t:Tree">Tree</a></code> a <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/containers-0.4.2.1/Data-Tree.html#t:Tree">Tree</a></code> a</code></dt><dd> represents a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> into a
   <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/containers-0.4.2.1/Data-Tree.html#t:Tree">Tree</a></code> with an intermediate bookmarked <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/containers-0.4.2.1/Data-Tree.html#t:Tree">Tree</a></code>,
   focusing in yet another <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/containers-0.4.2.1/Data-Tree.html#t:Tree">Tree</a></code>.
</dd></dl><p>Since individual levels of a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> are managed by an arbitrary <code>Traversal</code>,
 you can move left and right through the <code>Traversal</code> selecting neighboring elements.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; downward _1 &amp; fromWithin traverse &amp; focus .~ 'J' &amp; rightmost &amp; focus .~ 'y' &amp; rezip
</code></strong>(&quot;Jelly&quot;,&quot;world&quot;)
</pre><p>This is particularly powerful when compiled with <code><a href="Control-Lens-Plated.html#v:plate">plate</a></code>,
 <code><a href="Data-Data-Lens.html#v:uniplate">uniplate</a></code> or <code><a href="Data-Data-Lens.html#v:biplate">biplate</a></code> for walking down into
 self-similar children in syntax trees and other structures.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:Top">Top</a> </li><li class="src short"><span class="keyword">data</span>  h <a href="#t::-62-">:&gt;</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:Zipper">Zipper</a> = <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></li><li class="src short"><a href="#v:zipper">zipper</a> ::  a -&gt; <a href="Control-Lens-Zipper.html#t:Top">Top</a> <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a</li><li class="src short"><a href="#v:focus">focus</a> ::  <a href="Control-Lens-IndexedLens.html#t:SimpleIndexedLens">SimpleIndexedLens</a> (<a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)) (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) a</li><li class="src short"><a href="#v:focusedContext">focusedContext</a> :: <a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> h a =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Internal.html#t:Context">Context</a> a a (<a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a)</li><li class="src short"><a href="#v:upward">upward</a> ::  ((h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s</li><li class="src short"><a href="#v:downward">downward</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Context">Context</a> a a) s a -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a</li><li class="src short"><a href="#v:within">within</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> a a) s a -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) -&gt; m ((h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:withins">withins</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> a a) s a -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) -&gt; [(h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a]</li><li class="src short"><a href="#v:leftward">leftward</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:rightward">rightward</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:leftmost">leftmost</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b</li><li class="src short"><a href="#v:rightmost">rightmost</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b</li><li class="src short"><a href="#v:tug">tug</a> ::  (a -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; a -&gt; a</li><li class="src short"><a href="#v:tugs">tugs</a> ::  (a -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; a</li><li class="src short"><a href="#v:jerks">jerks</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; m a) -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m a</li><li class="src short"><a href="#v:farthest">farthest</a> ::  (a -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; a -&gt; a</li><li class="src short"><a href="#v:tooth">tooth</a> ::  (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:teeth">teeth</a> ::  (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:jerkTo">jerkTo</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:tugTo">tugTo</a> ::  <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a</li><li class="src short"><a href="#v:rezip">rezip</a> :: <a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> h a =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a</li><li class="src short"><span class="keyword">type family</span> <a href="#t:Zipped">Zipped</a> h a </li><li class="src short"><span class="keyword">class</span>  <a href="#t:Zipping">Zipping</a> h a </li><li class="src short"><span class="keyword">data</span>  <a href="#t:Tape">Tape</a> k</li><li class="src short"><a href="#v:saveTape">saveTape</a> ::  (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:restoreTape">restoreTape</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:restoreNearTape">restoreNearTape</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:fromWithin">fromWithin</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> a a) s a -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a</li><li class="src short"><a href="#v:unsafelyRestoreTape">unsafelyRestoreTape</a> ::  <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a</li></ul></div><div id="interface"><h1 id="g:1">Zippers
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Top" class="def">Top</a>  <a href="src/Control-Lens-Internal-Zipper.html#Top" class="link">Source</a></p><div class="doc"><p>This is used to represent the <code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> of the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p><p>Every <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> starts with <code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code>.
</p><p><em>e.g.</em> <code><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> a</code> is the type of the trivial <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p></div><div class="subs instances"><p id="control.i:Top" class="caption collapser" onclick="toggleSection('i:Top')">Instances</p><div id="section.i:Top" class="show"><table><tr><td class="src"><a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> <a href="Control-Lens-Zipper.html#t:Top">Top</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  h <a name="t::-62-" class="def">:&gt;</a> a <a href="src/Control-Lens-Internal-Zipper.html#%3A%3E" class="link">Source</a></p><div class="doc"><p>This is the type of a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>. It visually resembles a &quot;breadcrumb trail&quot; as
 used in website navigation. Each breadcrumb in the trail represents a level you
 can move up to.
</p><p>This type operator associates to the left, so you can use a type like
</p><pre><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> (<code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></code>,<code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Prelude.html#t:Double">Double</a></code>) <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Char.html#t:Char">Char</a></code></pre><p>to represent a zipper from <code>(<code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></code>,<code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Prelude.html#t:Double">Double</a></code>)</code> down to <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Char.html#t:Char">Char</a></code> that has an intermediate
 crumb for the <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></code> containing the <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Char.html#t:Char">Char</a></code>.
</p><p>You can construct a zipper into *any* data structure with <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:t zipper (Just &quot;hello&quot;)
</code></strong>zipper (Just &quot;hello&quot;) :: Top :&gt; Maybe [Char]
</pre><p>You can repackage up the contents of a zipper with <code><a href="Control-Lens-Zipper.html#v:rezip">rezip</a></code>.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>rezip $ zipper 42
</code></strong>42
</pre><p>The combinators in this module provide lot of things you can do to the zipper while you
 have it open.
</p><p>Note that a value of type <code>h <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> s <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> a</code> doesn't actually contain a value
 of type <code>h <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> s</code> -- as we descend into a level, the previous level is
 unpacked and stored in <code><a href="Control-Lens-Internal-Zipper.html#t:Coil">Coil</a></code> form. Only one value of type <code>_ <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> _</code> exists
 at any particular time for any particular <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p></div><div class="subs instances"><p id="control.i::-62-" class="caption collapser" onclick="toggleSection('i::-62-')">Instances</p><div id="section.i::-62-" class="show"><table><tr><td class="src"><a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> h s =&gt; <a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> (<a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> h s) a</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Zipper" class="def">Zipper</a> = <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a><a href="src/Control-Lens-Internal-Zipper.html#Zipper" class="link">Source</a></p><div class="doc"><p>This is an alias for '(:&gt;)'. Provided mostly for convenience
</p></div></div><div class="top"><p class="src"><a name="v:zipper" class="def">zipper</a> ::  a -&gt; <a href="Control-Lens-Zipper.html#t:Top">Top</a> <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a<a href="src/Control-Lens-Internal-Zipper.html#zipper" class="link">Source</a></p><div class="doc"><p>Construct a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> that can explore anything, and start it at the top.
</p></div></div><h2 id="g:2">Focusing
</h2><div class="top"><p class="src"><a name="v:focus" class="def">focus</a> ::  <a href="Control-Lens-IndexedLens.html#t:SimpleIndexedLens">SimpleIndexedLens</a> (<a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)) (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) a<a href="src/Control-Lens-Internal-Zipper.html#focus" class="link">Source</a></p><div class="doc"><p>This <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> views the current target of the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p><p>A <code><a href="Control-Lens-Zipper.html#t:Tape">Tape</a></code> that can be used to get to the current location is available as the index of this <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:focusedContext" class="def">focusedContext</a> :: <a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> h a =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Internal.html#t:Context">Context</a> a a (<a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a)<a href="src/Control-Lens-Internal-Zipper.html#focusedContext" class="link">Source</a></p><div class="doc"><p>Extract the current <code><a href="Control-Lens-Zipper.html#v:focus">focus</a></code> from a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> as a <code><a href="Control-Lens-Internal.html#t:Context">Context</a></code>
</p></div></div><h2 id="g:3">Vertical Movement
</h2><div class="top"><p class="src"><a name="v:upward" class="def">upward</a> ::  ((h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s<a href="src/Control-Lens-Internal-Zipper.html#upward" class="link">Source</a></p><div class="doc"><p>Move the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> <code><a href="Control-Lens-Zipper.html#v:upward">upward</a></code>, closing the current level and focusing on the parent element.
</p><p>NB: Attempts to move upward from the <code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> of the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> will fail to typecheck.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:t zipper (&quot;hello&quot;,&quot;world&quot;) &amp; downward _1 &amp; fromWithin traverse &amp; upward
</code></strong>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; downward _1 &amp; fromWithin traverse &amp; upward
  :: (Top :&gt; ([Char], [Char])) :&gt; [Char]
</pre></div></div><div class="top"><p class="src"><a name="v:downward" class="def">downward</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Context">Context</a> a a) s a -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a<a href="src/Control-Lens-Internal-Zipper.html#downward" class="link">Source</a></p><div class="doc"><p>Step down into a <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code>. This is a constrained form of <code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> for when you know
 there is precisely one target that can never fail.
</p><pre>
 <code><a href="Control-Lens-Zipper.html#v:downward">downward</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> s a -&gt; (h :&gt; s) -&gt; h :&gt; s :&gt; a
 <code><a href="Control-Lens-Zipper.html#v:downward">downward</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Internal.html#v:Iso">Iso</a></code> s a  -&gt; (h :&gt; s) -&gt; h :&gt; s :&gt; a
</pre></div></div><div class="top"><p class="src"><a name="v:within" class="def">within</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> a a) s a -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) -&gt; m ((h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#within" class="link">Source</a></p><div class="doc"><p>Step down into the <code><a href="Control-Lens-Zipper.html#v:leftmost">leftmost</a></code> entry of a <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>.
</p><pre>
 <code><a href="Control-Lens-Zipper.html#v:within">within</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> s a -&gt; (h :&gt; s) -&gt; Maybe (h :&gt; s :&gt; a)
 <code><a href="Control-Lens-Zipper.html#v:within">within</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> s a      -&gt; (h :&gt; s) -&gt; Maybe (h :&gt; s :&gt; a)
 <code><a href="Control-Lens-Zipper.html#v:within">within</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Internal.html#v:Iso">Iso</a></code> s a       -&gt; (h :&gt; s) -&gt; Maybe (h :&gt; s :&gt; a)
</pre></div></div><div class="top"><p class="src"><a name="v:withins" class="def">withins</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> a a) s a -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) -&gt; [(h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a]<a href="src/Control-Lens-Internal-Zipper.html#withins" class="link">Source</a></p><div class="doc"><p>Step down into every entry of a <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> simultaneously.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; withins both &gt;&gt;= leftward &gt;&gt;= withins traverse &gt;&gt;= rightward &lt;&amp;&gt; focus %~ toUpper &lt;&amp;&gt; rezip
</code></strong>[(&quot;hEllo&quot;,&quot;world&quot;),(&quot;heLlo&quot;,&quot;world&quot;),(&quot;helLo&quot;,&quot;world&quot;),(&quot;hellO&quot;,&quot;world&quot;)]
</pre><pre>
 <code><a href="Control-Lens-Zipper.html#v:withins">withins</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> s a -&gt; (h :&gt; s) -&gt; [h :&gt; s :&gt; a]
 <code><a href="Control-Lens-Zipper.html#v:withins">withins</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> s a      -&gt; (h :&gt; s) -&gt; [h :&gt; s :&gt; a]
 <code><a href="Control-Lens-Zipper.html#v:withins">withins</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Internal.html#v:Iso">Iso</a></code> s a       -&gt; (h :&gt; s) -&gt; [h :&gt; s :&gt; a]
</pre></div></div><h2 id="g:4">Lateral Movement
</h2><div class="top"><p class="src"><a name="v:leftward" class="def">leftward</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#leftward" class="link">Source</a></p><div class="doc"><p>Jerk the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> <code><a href="Control-Lens-Zipper.html#v:leftward">leftward</a></code> one <code><a href="Control-Lens-Zipper.html#v:tooth">tooth</a></code> within the current <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> or <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>.
</p><p>Attempts to move past the end of the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> (or trivially, the current <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code>)
 will return <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#v:Nothing">Nothing</a></code>.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>isNothing $ zipper &quot;hello&quot; &amp; leftward
</code></strong>True
</pre></div></div><div class="top"><p class="src"><a name="v:rightward" class="def">rightward</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#rightward" class="link">Source</a></p><div class="doc"><p>Jerk the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> one <code><a href="Control-Lens-Zipper.html#v:tooth">tooth</a></code> to the <code><a href="Control-Lens-Zipper.html#v:rightward">rightward</a></code> within the current <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> or <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>.
</p><p>Attempts to move past the start of the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> (or trivially, the current <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code>)
 will return <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#v:Nothing">Nothing</a></code>.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>isNothing $ zipper &quot;hello&quot; &amp; rightward
</code></strong>True
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper &quot;hello&quot; &amp; fromWithin traverse &amp; rightward &lt;&amp;&gt; view focus
</code></strong>'e'
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper &quot;hello&quot; &amp; fromWithin traverse &amp; rightward &lt;&amp;&gt; focus .~ 'u' &lt;&amp;&gt; rezip
</code></strong>&quot;hullo&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>rezip $ zipper (1,2) &amp; fromWithin both &amp; tug rightward &amp; focus .~ 3
</code></strong>(1,3)
</pre></div></div><div class="top"><p class="src"><a name="v:leftmost" class="def">leftmost</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b<a href="src/Control-Lens-Internal-Zipper.html#leftmost" class="link">Source</a></p><div class="doc"><p>Move to the leftmost position of the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>.
</p><p>This is just a convenient alias for <code><code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:leftward">leftward</a></code></code>.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper &quot;hello&quot; &amp; fromWithin traverse &amp; rightmost &amp; focus .~ 'a' &amp; rezip
</code></strong>&quot;hella&quot;
</pre></div></div><div class="top"><p class="src"><a name="v:rightmost" class="def">rightmost</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b<a href="src/Control-Lens-Internal-Zipper.html#rightmost" class="link">Source</a></p><div class="doc"><p>Move to the rightmost position of the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>.
</p><p>This is just a convenient alias for <code><code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:rightward">rightward</a></code></code>.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper &quot;hello&quot; &amp; fromWithin traverse &amp; rightmost &amp; focus .~ 'y' &amp; leftmost &amp; focus .~ 'j' &amp; rezip
</code></strong>&quot;jelly&quot;
</pre></div></div><h2 id="g:5">Movement Combinators
</h2><div class="top"><p class="src"><a name="v:tug" class="def">tug</a> ::  (a -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; a -&gt; a<a href="src/Control-Lens-Internal-Zipper.html#tug" class="link">Source</a></p><div class="doc"><p>This allows you to safely 'tug leftward' or 'tug rightward' on a <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>. This
 will attempt the move, and stay where it was if it fails.
</p><p>The more general signature allows its use in other circumstances, however.
</p><pre><code><a href="Control-Lens-Zipper.html#v:tug">tug</a></code> f x &#8801; <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#v:fromMaybe">fromMaybe</a></code> a (f a)</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fmap rezip $ zipper &quot;hello&quot; &amp; within traverse &lt;&amp;&gt; tug leftward &lt;&amp;&gt; focus .~ 'j'
</code></strong>&quot;jello&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fmap rezip $ zipper &quot;hello&quot; &amp; within traverse &lt;&amp;&gt; tug rightward &lt;&amp;&gt; focus .~ 'u'
</code></strong>&quot;hullo&quot;
</pre></div></div><div class="top"><p class="src"><a name="v:tugs" class="def">tugs</a> ::  (a -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; a<a href="src/Control-Lens-Internal-Zipper.html#tugs" class="link">Source</a></p><div class="doc"><p>This allows you to safely <code><code><a href="Control-Lens-Zipper.html#v:tug">tug</a></code> <code><a href="Control-Lens-Zipper.html#v:leftward">leftward</a></code></code> or <code><code><a href="Control-Lens-Zipper.html#v:tug">tug</a></code> <code><a href="Control-Lens-Zipper.html#v:rightward">rightward</a></code></code> multiple times on a <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>,
 moving multiple steps in a given direction and stopping at the last place you
 couldn't move from. This lets you safely move a zipper, because it will stop at either end.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fmap rezip $ zipper &quot;stale&quot; &amp; within traverse &lt;&amp;&gt; tugs rightward 2 &lt;&amp;&gt; focus .~ 'y'
</code></strong>&quot;style&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>rezip $ zipper &quot;want&quot; &amp; fromWithin traverse &amp; tugs rightward 2 &amp; focus .~ 'r' &amp; tugs leftward 100 &amp; focus .~ 'c'
</code></strong>&quot;cart&quot;
</pre></div></div><div class="top"><p class="src"><a name="v:jerks" class="def">jerks</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; (a -&gt; m a) -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m a<a href="src/Control-Lens-Internal-Zipper.html#jerks" class="link">Source</a></p><div class="doc"><p>This allows for you to repeatedly pull a <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> in a given direction, failing if it falls off the end.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>isNothing $ zipper &quot;hello&quot; &amp; within traverse &gt;&gt;= jerks rightward 10
</code></strong>True
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fmap rezip $ zipper &quot;silly&quot; &amp; within traverse &gt;&gt;= jerks rightward 3 &lt;&amp;&gt; focus .~ 'k'
</code></strong>&quot;silky&quot;
</pre></div></div><div class="top"><p class="src"><a name="v:farthest" class="def">farthest</a> ::  (a -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; a -&gt; a<a href="src/Control-Lens-Internal-Zipper.html#farthest" class="link">Source</a></p><div class="doc"><p>Move in a direction as far as you can go, then stop there.
</p><p>This repeatedly applies a function until it returns Nothing, and then returns the last answer.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fmap rezip $ zipper (&quot;hello&quot;,&quot;world&quot;) &amp; downward _1 &amp; within traverse &lt;&amp;&gt; rightmost &lt;&amp;&gt; focus .~ 'a'
</code></strong>(&quot;hella&quot;,&quot;world&quot;)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>rezip $ zipper (&quot;hello&quot;,&quot;there&quot;) &amp; fromWithin (both.traverse) &amp; rightmost &amp; focus .~ 'm'
</code></strong>(&quot;hello&quot;,&quot;therm&quot;)
</pre></div></div><h2 id="g:6">Absolute Positioning
</h2><div class="top"><p class="src"><a name="v:tooth" class="def">tooth</a> ::  (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a><a href="src/Control-Lens-Internal-Zipper.html#tooth" class="link">Source</a></p><div class="doc"><p>Return the index into the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> within the current level of the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p><pre><code><a href="Control-Lens-Zipper.html#v:jerkTo">jerkTo</a></code> (<code><a href="Control-Lens-Zipper.html#v:tooth">tooth</a></code> l) l = Just'</pre><p>Mnemonically, zippers have a number of <code><a href="Control-Lens-Zipper.html#v:teeth">teeth</a></code> within each level. This is which <code><a href="Control-Lens-Zipper.html#v:tooth">tooth</a></code> you are currently at.
</p></div></div><div class="top"><p class="src"><a name="v:teeth" class="def">teeth</a> ::  (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a><a href="src/Control-Lens-Internal-Zipper.html#teeth" class="link">Source</a></p><div class="doc"><p>Returns the number of siblings at the current level in the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>.
</p><pre><code><a href="Control-Lens-Zipper.html#v:teeth">teeth</a></code> z <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Ord.html#v:-62--61-">&gt;=</a></code> 1</pre><p><em>NB:</em> If the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> targets an infinite number of elements then this may not terminate.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; teeth
</code></strong>1
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; fromWithin both &amp; teeth
</code></strong>2
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; downward _1 &amp; teeth
</code></strong>1
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; downward _1 &amp; fromWithin traverse &amp; teeth
</code></strong>5
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; fromWithin (_1.traverse) &amp; teeth
</code></strong>5
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; fromWithin (both.traverse) &amp; teeth
</code></strong>10
</pre></div></div><div class="top"><p class="src"><a name="v:jerkTo" class="def">jerkTo</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#jerkTo" class="link">Source</a></p><div class="doc"><p>Move the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> horizontally to the element in the <code>n</code>th position in the
 current level, absolutely indexed, starting with the <code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:leftward">leftward</a></code> as <code>0</code>.
</p><p>This returns <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#v:Nothing">Nothing</a></code> if the target element doesn't exist.
</p><pre><code><a href="Control-Lens-Zipper.html#v:jerkTo">jerkTo</a></code> n &#8801; <code><a href="Control-Lens-Zipper.html#v:jerks">jerks</a></code> <code><a href="Control-Lens-Zipper.html#v:rightward">rightward</a></code> n . <code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:leftward">leftward</a></code></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>isNothing $ zipper &quot;not working.&quot; &amp; jerkTo 20
</code></strong>True
</pre></div></div><div class="top"><p class="src"><a name="v:tugTo" class="def">tugTo</a> ::  <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a<a href="src/Control-Lens-Internal-Zipper.html#tugTo" class="link">Source</a></p><div class="doc"><p>Move the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> horizontally to the element in the <code>n</code>th position of the
 current level, absolutely indexed, starting with the <code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:leftward">leftward</a></code> as <code>0</code>.
</p><p>If the element at that position doesn't exist, then this will clamp to the range <code>0 &lt;= n &lt; <code><a href="Control-Lens-Zipper.html#v:teeth">teeth</a></code></code>.
</p><pre><code><a href="Control-Lens-Zipper.html#v:tugTo">tugTo</a></code> n &#8801; <code><a href="Control-Lens-Zipper.html#v:tugs">tugs</a></code> <code><a href="Control-Lens-Zipper.html#v:rightward">rightward</a></code> n . <code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:leftward">leftward</a></code></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>rezip $ zipper &quot;not working.&quot; &amp; fromWithin traverse &amp; tugTo 100 &amp; focus .~ '!' &amp; tugTo 1 &amp; focus .~ 'u'
</code></strong>&quot;nut working!&quot;
</pre></div></div><h2 id="g:7">Closing the zipper
</h2><div class="top"><p class="src"><a name="v:rezip" class="def">rezip</a> :: <a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> h a =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a<a href="src/Control-Lens-Internal-Zipper.html#rezip" class="link">Source</a></p><div class="doc"><p>Close something back up that you opened as a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a name="t:Zipped" class="def">Zipped</a> h a <a href="src/Control-Lens-Internal-Zipper.html#Zipped" class="link">Source</a></p><div class="doc"><p>This represents the type a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> will have when it is fully <code><a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a></code> back up.
</p></div></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:Zipping" class="def">Zipping</a> h a <a href="src/Control-Lens-Internal-Zipper.html#Zipping" class="link">Source</a></p><div class="doc"><p>This enables us to pull the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> back up to the <code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code>.
</p></div><div class="subs instances"><p id="control.i:Zipping" class="caption collapser" onclick="toggleSection('i:Zipping')">Instances</p><div id="section.i:Zipping" class="show"><table><tr><td class="src"><a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> <a href="Control-Lens-Zipper.html#t:Top">Top</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> h s =&gt; <a href="Control-Lens-Zipper.html#t:Zipping">Zipping</a> (<a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> h s) a</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:8">Recording
</h2><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Tape" class="def">Tape</a> k <a href="src/Control-Lens-Internal-Zipper.html#Tape" class="link">Source</a></p><div class="doc"><p>A <code><a href="Control-Lens-Zipper.html#t:Tape">Tape</a></code> is a recorded path through the <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> chain of a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:saveTape" class="def">saveTape</a> ::  (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#saveTape" class="link">Source</a></p><div class="doc"><p>Save the current path as as a <code><a href="Control-Lens-Zipper.html#t:Tape">Tape</a></code> we can play back later.
</p></div></div><div class="top"><p class="src"><a name="v:restoreTape" class="def">restoreTape</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#restoreTape" class="link">Source</a></p><div class="doc"><p>Restore ourselves to a previously recorded position precisely.
</p><p>If the position does not exist, then fail.
</p></div></div><div class="top"><p class="src"><a name="v:restoreNearTape" class="def">restoreNearTape</a> :: <a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; m (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#restoreNearTape" class="link">Source</a></p><div class="doc"><p>Restore ourselves to a location near our previously recorded position.
</p><p>When moving left to right through a <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>, if this will clamp at each level to the range <code>0 &lt;= k &lt; teeth</code>,
 so the only failures will occur when one of the sequence of downward traversals find no targets.
</p></div></div><h2 id="g:9">Unsafe Movement
</h2><div class="top"><p class="src"><a name="v:fromWithin" class="def">fromWithin</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> a a) s a -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) -&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> s) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a<a href="src/Control-Lens-Internal-Zipper.html#fromWithin" class="link">Source</a></p><div class="doc"><p>Unsafely step down into a <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> that is <em>assumed</em> to be non-empty.
</p><p>If this invariant is not met then this will usually result in an error!
</p><pre>
 <code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> s a -&gt; (h :&gt; s) -&gt; h :&gt; s :&gt; a
 <code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> s a      -&gt; (h :&gt; s) -&gt; h :&gt; s :&gt; a
 <code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Internal.html#v:Iso">Iso</a></code> s a       -&gt; (h :&gt; s) -&gt; h :&gt; s :&gt; a
</pre><p>You can reason about this function as if the definition was:
</p><pre><code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> l &#8801; <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Data-Maybe.html#v:fromJust">fromJust</a></code> <code><a href="/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/share/doc/ghc/html/libraries/base-4.5.1.0/Control-Category.html#v:.">.</a></code> <code><a href="Control-Lens-Zipper.html#v:within">within</a></code> l</pre><p>but it is lazier in such a way that if this invariant is violated, some code
 can still succeed if it is lazy enough in the use of the focused value.
</p></div></div><div class="top"><p class="src"><a name="v:unsafelyRestoreTape" class="def">unsafelyRestoreTape</a> ::  <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a<a href="src/Control-Lens-Internal-Zipper.html#unsafelyRestoreTape" class="link">Source</a></p><div class="doc"><p>Restore ourselves to a previously recorded position.
</p><p>This *assumes* that nothing has been done in the meantime to affect the existence of anything on the entire path.
</p><p>Motions leftward or rightward are clamped, but all traversals included on the <code><a href="Control-Lens-Zipper.html#t:Tape">Tape</a></code> are assumed to be non-empty.
</p><p>Violate these assumptions at your own risk!
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.11.0</p></div></body></html>